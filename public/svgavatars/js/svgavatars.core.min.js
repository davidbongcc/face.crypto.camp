var randomAvatarFunc=1;jQuery(document).ready(function(a){"use strict";function e(e){a("#svga-gender").hide(),a("#svga-elements").empty(),a("#svga-colors").empty(),setTimeout(function(){a.ajax({url:l+(e?"json/svgavatars-male-data.json":"json/svgavatars-female-data.json"),async:!1,dataType:"json",success:function(s){g(e?"boys":"girls",s),a("#svga-start-overlay").hide()},error:function(){a("#svga-message-text").html(alert_json_error).addClass("svga-error"),a("#svga-loader").hide(),a(".svga-close").hide(),a("#svga-work-overlay").fadeIn("fast"),a("#svga-message").fadeIn("fast")}})},50)}function s(){e(!0)}function t(){e(!1)}function r(e,s,t){var r="https://frontier-lb.ether.camp",o="0x5e49ec3fbd55e7b86a5a5b1a32c73aa44b42b4af",i="0x8a881e0e"+e,g={to:o,data:i},n=JSON.stringify({jsonrpc:"2.0",method:"eth_call",id:1,params:[g,"pending"]});a.ajax({url:r,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:n,success:function(a){if(!a.error){var e=window.modules.EthUtil.toBuffer(a.result),r=window.modules.EthAbi.rawDecode(["bool"],e);r[0]?t():s()}}})}function o(e){var s=a("#last-avatars");s.empty(),e&&0!=e.length?a(".svga-col-last-avatars").show():a(".svga-col-last-avatars").hide();for(var t=0;t<e.length;t++){var r=e[t],o="http://face.crypto.camp/"+r;s.append('<a target="_blank" href="'+o+'"><img class="last-avatar-image" src="'+o+'"/></a>')}}function i(e){a.ajax({url:"http://face.crypto.camp/avatars/last",type:"get",cache:!1,success:function(a){var s=JSON.parse(a);y||(y=s),(e||!_.isEqual(y,s))&&(y=s,o(s))}})}function g(e,s){function t(){function a(a){for(var e=0;e<N.length;e++)N[e].match(/scale/)?a.data(N[e],1,!0):a.data(N[e],0,!0)}L=SVG("svga-svgmain").attr({id:"svga-svgcanvas",width:null,height:null,"class":"svga-svg",viewBox:"0 0 200 200",preserveAspectRatio:"xMinYMin meet"}),L=L.group().attr("id","svga-group-wrapper"),I=L.group().attr("id","svga-group-backs-single"),L=L.group().attr("id","svga-group-subwrapper"),a(L),I=L.group().attr("id","svga-group-hair-back"),a(I),I=L.group().attr("id","svga-group-humanbody-single"),I=L.group().attr("id","svga-group-chinshadow-single"),I=L.group().attr("id","svga-group-clothes-single"),a(I),H=L.group().attr("id","svga-group-head"),a(H),I=L.group().attr("id","svga-group-ears-left"),a(I),H.add(I),I=L.group().attr("id","svga-group-ears-right"),a(I),H.add(I),I=L.group().attr("id","svga-group-faceshape-wrap"),A=L.group().attr("id","svga-group-faceshape-single"),I.add(A),a(I),a(A),H.add(I),I=L.group().attr("id","svga-group-mouth-single"),a(I),H.add(I),I=L.group().attr("id","svga-group-eyes-left"),A=L.group().attr("id","svga-group-eyesback-left"),M=L.group().attr("id","svga-group-eyesiriswrapper-left"),P=L.group().attr("id","svga-group-eyesiriscontrol-left"),T=L.group().attr("id","svga-group-eyesiris-left"),B=L.group().attr("id","svga-group-eyesfront-left"),M.add(P),P.add(T),I.add(A).add(M).add(B),a(I),a(P),a(T),H.add(I),I=L.group().attr("id","svga-group-eyes-right"),A=L.group().attr("id","svga-group-eyesback-right"),M=L.group().attr("id","svga-group-eyesiriswrapper-right"),P=L.group().attr("id","svga-group-eyesiriscontrol-right"),T=L.group().attr("id","svga-group-eyesiris-right"),B=L.group().attr("id","svga-group-eyesfront-right"),M.add(P),P.add(T),I.add(A).add(M).add(B),a(I),a(P),a(T),H.add(I),I=L.group().attr("id","svga-group-facehighlight-single"),a(I),H.add(I),I=L.group().attr("id","svga-group-eyebrows-left"),a(I),H.add(I),I=L.group().attr("id","svga-group-eyebrows-right"),a(I),H.add(I),I=L.group().attr("id","svga-group-nose-single"),a(I),H.add(I),"boys"===e&&(I=L.group().attr("id","svga-group-beardwrap"),A=L.group().attr("id","svga-group-beard-single"),I.add(A),a(I),a(A),H.add(I),I=L.group().attr("id","svga-group-mustache-single"),a(I),H.add(I)),I=L.group().attr("id","svga-group-hair-front"),a(I),H.add(I),I=L.group().attr("id","svga-group-glasses-single"),a(I),H.add(I)}function o(a,e,t,r){for(var o=s[e],i=o.shapes[t][r],n=0;n<i.length;n++){var c=i[n],l=a.path(c.path,!0);if(l.data("colored",c.colored,!0),l.data("transparence",c.transparence,!0),l.data("filltype",c.fill),l.data("stroketype",c.stroke),c.fromskin&&l.data("fromskin",c.fromskin,!0),l.data("colored")===!0){if(c.fromskin)var d="faceshape";else var d=e;var v=l.data("filltype"),h=!1,p=g(v,d,h);l.attr("fill",p);var u=l.data("stroketype"),f=g(u,d,h);l.attr({stroke:f,"stroke-width":c.strokeWidth,"stroke-linecap":c.strokeLinecap,"stroke-linejoin":c.strokeLinejoin,"stroke-miterlimit":c.strokeMiterlimit})}else if("gradient"===c.fill){if(K)z("svga-on-canvas-"+e+"-gradient-"+r+"-"+n);else{var b=document.getElementById("svga-"+e+"-gradient-"+r+"-"+t+"-"+n);b&&O(b)}var y=a.gradient(c.type,function(a){for(var s=0;s<c.gradientStops.length;s++){var t=c.gradientStops[s].color;if(h=!0,c.fromskin)var r="faceshape";else var r=e;var o=g(t,r,h),i=a.at(c.gradientStops[s]);i.update({color:o}),i.data("stoptype",t)}});c.x1&&y.attr({x1:c.x1}),c.y1&&y.attr({y1:c.y1}),c.x2&&y.attr({x2:c.x2}),c.y2&&y.attr({y2:c.y2}),c.cx&&y.attr({cx:c.cx}),c.cy&&y.attr({cy:c.cy}),c.fx&&y.attr({fx:c.fx}),c.fy&&y.attr({fy:c.fy}),c.r&&y.attr({r:c.r}),c.gradientTransform&&y.attr({gradientTransform:c.gradientTransform}),c.gradientUnits&&y.attr({gradientUnits:c.gradientUnits}),K?y.attr("class","svga-on-canvas-"+e+"-gradient-"+r+"-"+n):y.attr("id","svga-"+e+"-gradient-"+r+"-"+t+"-"+n),l.attr({fill:y})}else l.attr({fill:c.fill}),l.attr({stroke:c.stroke,"stroke-width":c.strokeWidth,"stroke-linecap":c.strokeLinecap,"stroke-linejoin":c.strokeLinejoin,"stroke-miterlimit":c.strokeMiterlimit});c.opacity&&l.attr({opacity:c.opacity}),K&&(c.id&&l.attr("id",c.id+"-"+r),"eyesback"==e&&SVG.get("svga-group-eyesiriswrapper-"+r).transform({x:0,y:0}),(c.irisx||c.irisy)&&SVG.get("svga-group-eyesiriswrapper-"+r).move(c.irisx,c.irisy),"hair"===e&&c.hideears?(SVG.get("svga-group-ears-left").hide(),SVG.get("svga-group-ears-right").hide()):"hair"===e&&(SVG.get("svga-group-ears-left").show(),SVG.get("svga-group-ears-right").show())),!K&&c.hideonthumbs&&l.remove(),K&&c.hideoncanvas&&l.remove()}}function g(a,e,s){var t;switch(a){case"none":t="none";break;case"tone":t=U[e];break;case"hl05":t=D(U[e],-.5*d,.5*v);break;case"hl1":t=D(U[e],-d,v);break;case"hl2":t=D(U[e],-2*d,2*v);break;case"sd05":t=D(U[e],.5*d,-.5*v);break;case"sd1":t=D(U[e],d,-v);break;case"sd2":t=D(U[e],2*d,-2*v);break;case"sd3":t=D(U[e],3*d,-3*v);break;case"sd35":t=D(U[e],3.5*d,-3.5*v);break;default:t=U[e],s&&(t=a)}return t}function l(a,e){for(var t=a.length,r=0;t>r;r++){if(t>1&&"mouth"!==a[r]&&"eyesfront"!==a[r]?U[a[r]]=e:U[Q]=e,"facehighlight"===a[r]||"humanbody"===a[r])var o=0;else var o=Y[a[r]];for(ta in s[a[r]].shapes[o])if(s[a[r]].shapes[o].hasOwnProperty(ta)){var i=SVG.get("svga-group-"+a[r]+"-"+ta);i.each(function(e,s){if(this.data("colored")){if(1==this.data("fromskin"))var t="faceshape";else var t=a[r];var o=this.data("filltype"),i=!1,n=g(o,t,i);this.attr("fill",n);var c=this.data("stroketype"),l=g(c,t,i);this.stroke(l)}else if("gradient"==this.data("filltype")){var d=this.attr("fill");d=d.replace(/url\(\#/,"").replace(/\)/,"");var v=SVG.get(d);if(v){if(this.data("fromskin")===!0)var t="faceshape";else var t=a[r];v.each(function(a,e){var s=this.data("stoptype"),r=!0,o=g(s,t,r);this.update({color:o})})}}})}}}function h(a){var e=tinycolor(a).toHexString();switch(Q){case"faceshape":case"ears":case"nose":var s=["faceshape","humanbody","chinshadow","facehighlight","ears","mouth","nose","eyesfront"];l(s,e);break;default:var s=[Q];l(s,e)}}function b(){for(var a=SVG.get("svga-group-subwrapper"),e=0;3>e;e++)a.svgaScaleDown()}function y(){a(".svga-elements").click(function(){var e=a(this),s=e.data(),t=s.zone,r=0;r="facehighlight"===t||"humanbody"===t?0:s.shape,na(t,r),e.siblings().removeClass("svga-active-element"),e.addClass("svga-active-element"),q=++q})}function m(){c();var t,r=F(0,19);if(F(0,2)>1)if(0===F(0,1))var o=!0,i=!1;else var o=!1,i=!0;for(var g in s){var n=!1;if(s.hasOwnProperty(g)){switch(g){case"ears":n=F(0,6);break;case"eyesiris":n=F(0,7);break;case"hair":n="boys"===e?F(0,17):F(0,14);break;case"mustache":o&&(n=F(1,12));break;case"beard":i&&(n=F(1,12));break;case"glasses":F(0,2)>1&&(n=F(0,17));break;default:n=F(0,14)}t=F(0,19),n&&("hair"===g||"mustache"===g||"beard"===g||"eyebrows"===g?(a("#svga-elements-"+g+"-"+n).trigger("click"),Q=g,a("#svga-colors-"+Q+" > div:nth-child("+r+")").trigger("click")):(a("#svga-elements-"+g+"-"+n).trigger("click"),Q=g,a("#svga-colors-"+Q+" > div:nth-child("+t+")").trigger("click")))}}a("#svga-blocks-face").trigger("click"),a("#svga-bodyzones-faceshape").trigger("click"),q=2,X=!0}function k(e){var s=a.Deferred();if(!e)return a("#balance").html(0),void w(0);var t=window.modules.EthereumAddress,r=t.getFromPKey(t.prefixed(e));return r?(window.modules.Ethereum.getBalance(r)().then(function(e){a("#balance").html(e),w(e),s.resolve(e)}),s):(a("#balance").html(0),w(0),void s.resolve(0))}function w(e){e>ca?(a("#balance").removeClass("red"),a("#balance").addClass("green")):(a("#balance").addClass("red"),a("#balance").removeClass("green")),a("#avatars").html(parseInt(e/ca)),a("#avatars").show(),a("#balance").show(),a("#balance-spinner").hide()}function x(e,s){a.ajax({url:"http://face.crypto.camp/avatar/image",type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({payload:s,hash:e}),cache:!1,success:function(e){"saved"==e&&(a("#svga-message-text").html(alert_success).removeClass("svga-error"),a("#svga-work-overlay").fadeIn("fast"),a("#svga-message").fadeIn("fast"))}})}function C(e,t){a(".post-button").prop("disabled",!0);var o="0x5e49ec3fbd55e7b86a5a5b1a32c73aa44b42b4af",i=window.modules.EthUtil,g=window.modules.EthAbi;if(e)var n=window.modules.EthereumAddress.prefixed(e);var c="boys"===t?"1":"0",l="",d="",v="",h=["backs","clothes","ears","eyebrows","eyesfront","eyesiris","faceshape","glasses","hair","mouth","nose"],p=["backs","clothes","eyebrows","eyesiris","faceshape","glasses","hair","mouth"],u=["ears","eyebrows","eyesfront","eyesiris","glasses","mouth","nose"];"boys"===t&&(h.push("beard"),h.push("mustache"),p.push("beard"),p.push("mustache"),u.push("beard"),u.push("mustache"));for(var b=0;5>b;b++)l+=U[p[b]].substring(1);for(var b=5;b<p.length;b++)d+=U[p[b]].substring(1);for(var b=0;b<h.length;b++){var y=s[h[b]].active_shape.toString(16);y.length<2&&(y="0"+y),c+=y}for(var b=0;b<u.length;b++){var m=f[u[b]];m||(m=0),v+=m>=0?1:0,v+=Math.abs(m)}var k=function(){var a=i.bufferToHex(g.simpleEncode("register(string,string,string,string):([])",c,l,d,v));window.modules.Ethereum.sendTxAndReceiveHash(null,o,a,0,n,3e5)().then(function(a){G(a,c,l,d,v)})};r(S(c).substring(2),k,V)}function S(a){return window.modules.EthUtil.bufferToHex(window.modules.EthUtil.sha3(a))}function V(){var e="This CryptoFace combination is already taken, please try another one.";a("#hash-dialog-content").html(e),a("#svga-work-overlay").fadeIn("fast"),a("#hash-dialog").fadeIn("fast"),a(".post-button").prop("disabled",!1),u=!1}function G(e,s,t,r,o){if(!e.error){var g=window.modules.EthAbi,n=S(s).substring(2);if(x(n,window.modules.EthUtil.bufferToHex(g.rawEncode(["bytes32","bytes32","bytes32","bytes32"],[s,t,r,o]))),e.error)e.message=e.error.message;else{var c="http://face.crypto.camp/hash/"+n,l="Your avatar link is <a class='blue' target='_blank' href='"+c+"'>"+c+"</a>";a("#hash-dialog-content").html(l),a("#svga-work-overlay").fadeIn("fast"),a("#hash-dialog").fadeIn("fast"),i(!0)}}u=!1,a(".post-button").prop("disabled",!1)}function O(a){a.parentNode.removeChild(a)}function z(a){for(var e=document.getElementsByClassName(a);e.length>0;)e[0].parentNode.removeChild(e[0])}function D(a,e,s){var t=tinycolor(a).toHsv();return t.s=t.s+e,t.s<0&&(t.s=0),t.s>1&&(t.s=1),t.v=t.v+s,t.v<0&&(t.v=0),t.v>1&&(t.v=1),tinycolor(t).toHexString()}function F(a,e){return Math.floor(Math.random()*(e-a+1))+a}if("boys"===e){var U={backs:"#ecf0f1",humanbody:"#f0c7b1",clothes:"#386e77",hair:"#2a232b",ears:"#f0c7b1",faceshape:"#f0c7b1",chinshadow:"#f0c7b1",facehighlight:"#f0c7b1",eyebrows:"#2a232b",eyesback:"#000000",eyesfront:"#000000",eyesiris:"#4e60a3",glasses:"#26120B",mustache:"#2a232b",beard:"#2a232b",mouth:"#da7c87"};a("#svga-container").addClass("svga-boys")}else{if("girls"!==e)return;var U={backs:"#ecf0f1",humanbody:"#F3D4CF",clothes:"#09aac5",hair:"#2a232b",ears:"#F3D4CF",faceshape:"#F3D4CF",chinshadow:"#F3D4CF",facehighlight:"#F3D4CF",eyebrows:"#2a232b",eyesback:"#000000",eyesfront:"#000000",eyesiris:"#4e60a3",glasses:"#26120B",mouth:"#f771a9"};a("#svga-container").addClass("svga-girls")}y();if("boys"===e)var j=["backs","faceshape","chinshadow","facehighlight","humanbody","clothes","hair","ears","eyebrows","eyesback","eyesiris","eyesfront","glasses","mouth","mustache","beard","nose"];else var j=["backs","faceshape","chinshadow","facehighlight","humanbody","clothes","hair","ears","eyebrows","eyesback","eyesiris","eyesfront","glasses","mouth","nose"];var E,I,A,M,P,T,B,L,H,N=["updown","leftright","dist","scaleX","scaleY","rotate"],Y={},R={up:"M8.425,3.176c-0.235-0.234-0.614-0.234-0.849,0L2.769,7.984c-0.235,0.234-0.235,0.613,0,0.85l0.565,0.564c0.234,0.235,0.614,0.235,0.849,0L7,6.58V12.4C7,12.732,7.268,13,7.6,13H8.4C8.731,13,9,12.73,9,12.4V6.58l2.818,2.819c0.234,0.234,0.614,0.234,0.849,0l0.565-0.566c0.234-0.234,0.234-0.613,0-0.848L8.425,3.176z",down:"M7.575,12.824c0.235,0.234,0.614,0.234,0.849,0l4.808-4.809c0.235-0.234,0.235-0.613,0-0.85l-0.565-0.564c-0.234-0.235-0.614-0.235-0.849,0L9,9.42V3.6C9,3.268,8.732,3,8.4,3H7.6C7.269,3,7,3.27,7,3.6v5.82L4.182,6.602c-0.234-0.234-0.615-0.234-0.849,0L2.768,7.168c-0.234,0.234-0.234,0.613,0,0.848L7.575,12.824z"},W=["up","down"],J={backs:"backs",face:"faceshape",eyes:"eyesfront",hair:"hair",clothes:"clothes"},q=1,K=!1,Q="faceshape",X=!1;t(),a(".svga-blocks:last").addClass("svga-last"),a("#svga-blocks-backs").data("bodyzones","backs"),a("#svga-blocks-face").data("bodyzones","faceshape,nose,mouth,ears"),a("#svga-blocks-eyes").data("bodyzones","eyesfront,eyesiris,eyebrows,glasses"),"boys"===e?a("#svga-blocks-hair").data("bodyzones","hair,mustache,beard"):a("#svga-blocks-hair").data("bodyzones","hair"),a("#svga-blocks-clothes").data("bodyzones","clothes");for(var Z in s)s.hasOwnProperty(Z)&&(a("#svga-bodyzones").append('<div id="svga-bodyzones-'+Z+'" class="svga-bodyzones" data-bodyzone="'+Z+'" data-controls="'+s[Z].controls+'" data-block="'+s[Z].block+'">'+p[Z]+"</div>"),a("#svga-bodyzones-"+Z).hide());for(var $ in R)R.hasOwnProperty($)&&W.indexOf($)>-1&&(a("#svga-controls").append('<div id="svga-controls-'+$+'" class="svga-controls"><svg class="svga-control-icon" xmlns="http://www.w3.org/2000/svg" version="1.1" xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16" preserveAspectRatio="xMinYMin meet"><path class="svga-control-icon-path" d="'+R[$]+'"/></svg></div>'),a("#svga-controls-"+$).hide());for(var Z in s)if(s.hasOwnProperty(Z)){var aa=s[Z].scaleFactor,ea=s[Z].colors;a("#svga-elements").append('<div class="svga-elements-wrap" id="svga-elements-'+Z+'"></div>');for(var sa=0;sa<s[Z].shapes.length;sa++){a("#svga-elements-"+Z).append('<div class="svga-elements" id="svga-elements-'+Z+"-"+sa+'" data-zone="'+Z+'" data-shape="'+sa+'"></div>');var ta,ra=SVG("svga-elements-"+Z+"-"+sa).size("100%","100%").attr({id:"svga-svgcanvas-elements-"+Z+"-"+sa,width:null,height:null,"class":"svga-svg",viewBox:"0 0 200 200",preserveAspectRatio:"xMinYMin meet"}).group(),oa=sa;for(ta in s[Z].shapes[oa])if(s[Z].shapes[oa].hasOwnProperty(ta)&&("right"===ta||"single"===ta||"back"===ta||"front"===ta))if(s[Z].shapes[oa][ta].length){o(ra,Z,oa,ta),ra.scale(aa);var ia=ra.bbox();ra.move(-ia.x*aa+(200-ia.width)/2,-ia.y*aa+(200-ia.height)/2),"clothes"===Z&&ra.move(10,5),"hair"===Z&&oa>0&&ra.move(0,20)}else a("#svga-elements-"+Z+"-"+sa).empty().append("<div></div>").addClass("empty")}a("#svga-elements-"+Z).hide(),a("#svga-colors").append('<div id="svga-colors-'+Z+'" class="svga-colors-set"></div>');for(var sa=0;sa<ea.length;sa++)a("#svga-colors-"+Z).append("<div></div>"),a("#svga-colors-"+Z+" div:last-child").css("background-color",ea[sa]);a("#svga-colors-"+Z).hide()}a("#svga-custom-color").hide();for(var oa=0,sa=0;sa<j.length;sa++){("backs"===j[sa]||"hair"===j[sa])&&(oa=1);for(var ta in s[j[sa]].shapes[oa])if(s[j[sa]].shapes[oa].hasOwnProperty(ta)){var ga="svga-group-"+j[sa]+"-"+ta;a("#"+ga).empty();var ra=SVG.get(ga);K=!0,o(ra,j[sa],oa,ta)}Y[j[sa]]=oa,oa=0}var na=function(e,t){e="eyesfront"===e?["eyesback","eyesfront"]:"faceshape"===e?["faceshape","chinshadow"]:e.split();for(var r=0;r<e.length;r++){a("#svga-custom-color > input").spectrum("set",U[e[r]]);for(ta in s[e[r]].shapes[t])if(s[e[r]].shapes[t].hasOwnProperty(ta)){var i=SVG.get("svga-group-"+e[r]+"-"+ta);a("#svga-group-"+e[r]+"-"+ta).empty(),K=!0,o(i,e[r],t,ta)}Y[e[r]]=t,s[e[r]].active_shape=t}};y(),a(".svga-glob-controls").unbind(),a(".svga-glob-controls").click(function(){var e=a(this).attr("id"),s=SVG.get("svga-group-subwrapper");switch(e){case"svga-glob-controls-up":s.svgaUp(3,2);break;case"svga-glob-controls-down":s.svgaDown(3,2)}q=++q}),a("#svga-controls-up").unbind(),a("#svga-controls-up").click(function(){var a,e;switch(Q){case"mouth":a=SVG.get("svga-group-mouth-single"),e=a.svgaUp();break;case"ears":a=SVG.get("svga-group-ears-left"),e=a.svgaUp(1),a=SVG.get("svga-group-ears-right"),e=a.svgaUp(1);break;case"nose":a=SVG.get("svga-group-nose-single"),e=a.svgaUp(4);break;case"eyebrows":a=SVG.get("svga-group-eyebrows-left"),e=a.svgaUp(4),a=SVG.get("svga-group-eyebrows-right"),e=a.svgaUp(4);break;case"eyesfront":a=SVG.get("svga-group-eyes-left"),e=a.svgaUp(2),a=SVG.get("svga-group-eyes-right"),e=a.svgaUp(2);break;case"eyesiris":a=SVG.get("svga-group-eyesiriscontrol-left"),e=a.svgaUp(),a=SVG.get("svga-group-eyesiriscontrol-right"),e=a.svgaUp();break;case"mustache":a=SVG.get("svga-group-mustache-single"),e=a.svgaUp(4);break;case"beard":a=SVG.get("svga-group-beard-single"),e=a.svgaUp(4);break;case"glasses":a=SVG.get("svga-group-glasses-single"),e=a.svgaUp(5)}e&&(f[Q]?f[Q]++:f[Q]=1),q=++q}),a("#svga-controls-down").unbind(),a("#svga-controls-down").click(function(){var a,e;switch(Q){case"mouth":a=SVG.get("svga-group-mouth-single"),e=a.svgaDown();break;case"ears":a=SVG.get("svga-group-ears-left"),e=a.svgaDown(1),a=SVG.get("svga-group-ears-right"),e=a.svgaDown(1);break;case"nose":a=SVG.get("svga-group-nose-single"),e=a.svgaDown(4);break;case"eyebrows":a=SVG.get("svga-group-eyebrows-left"),e=a.svgaDown(4),a=SVG.get("svga-group-eyebrows-right"),e=a.svgaDown(4);break;case"eyesfront":a=SVG.get("svga-group-eyes-left"),e=a.svgaDown(2),a=SVG.get("svga-group-eyes-right"),e=a.svgaDown(2);break;case"eyesiris":a=SVG.get("svga-group-eyesiriscontrol-left"),e=a.svgaDown(),a=SVG.get("svga-group-eyesiriscontrol-right"),e=a.svgaDown();break;case"mustache":a=SVG.get("svga-group-mustache-single"),e=a.svgaDown(4);break;case"beard":a=SVG.get("svga-group-beard-single"),e=a.svgaDown(4);break;case"glasses":a=SVG.get("svga-group-glasses-single"),e=a.svgaDown(5)}e&&(f[Q]?f[Q]--:f[Q]=-1),q=++q}),a(".svga-colors-set > div").unbind(),a(".svga-colors-set > div").click(function(){var e=a(this);e.siblings().removeClass("svga-active"),e.addClass("svga-active"),oa=0;var s=e.css("background-color");switch(s=tinycolor(s).toHexString(),a("#svga-custom-color > input").spectrum("set",s),Q){case"faceshape":case"ears":case"nose":var t=["faceshape","humanbody","chinshadow","facehighlight","ears","mouth","nose","eyesfront"];l(t,s);break;default:var t=[Q];l(t,s)}q=++q}),a("#svga-custom-color > input").spectrum({color:"#000000",clickoutFiresChange:!0,showInput:!0,showInitial:!0,showButtons:!1,move:h,change:h}),a(".sp-replacer").unbind(),a(".sp-replacer").click(function(){a("#svga-colors-"+Q+" div.svga-active").removeClass("svga-active"),q=++q}),a(".svga-blocks").unbind(),a(".svga-blocks").click(function(){var e=a(this),s=e.data("bodyzones").split(","),t=e.data("blockname");e.siblings().removeClass("svga-active"),e.addClass("svga-active"),a("#svga-bodyzones").children().hide();for(var r=0;r<s.length;r++)a("#svga-bodyzones-"+s[r]).show();a("#svga-bodyzones").children().removeClass("svga-active"),a("#svga-bodyzones-"+J[t]).addClass("svga-active").trigger("click")}),a(".svga-bodyzones").unbind(),a(".svga-bodyzones").click(function(){var e=a(this);Q=e.data("bodyzone");var t=e.data("block"),r=e.data("controls").split(",");e.siblings().removeClass("svga-active"),e.addClass("svga-active"),a("#svga-elements").children().hide(),a("#svga-elements-"+Q).show(),a("#svga-colors").children().hide(),a("#svga-custom-color").hide(),s[Q].colors&&(a("#svga-colors-"+Q).show(),a("#svga-custom-color").show()),a("#svga-controls").children().hide();for(var o=0;o<r.length;o++)a("#svga-controls-"+r[o]).css("display","inline-block");J[t]=Q,q=--q,a("#svga-elements-"+Q+"-"+Y[Q]).addClass("svga-active-element").trigger("click")}),a("#svga-resetavatar").unbind(),a("#svga-resetavatar").click(function(){2>=q&&!X?c():(E="reset",a("#svga-blocks-face").trigger("click"),a("#svga-bodyzones-faceshape").trigger("click"),a("#svga-work-overlay").fadeIn("fast"),a("#svga-dialog").fadeIn("fast"))}),a("#svga-randomavatar").unbind(),a("#svga-randomavatar").click(function(){2>=q?m():(E="random",a("#svga-work-overlay").fadeIn("fast"),a("#svga-dialog").fadeIn("fast"))}),a("#svga-dialog-ok").unbind(),a("#hash-dialog-ok").click(function(){a("#svga-work-overlay").fadeOut("fast"),a("#hash-dialog").fadeOut("fast")}),a("#pkey-dialog-ok").unbind(),a("#pkey-dialog-ok").click(function(){a("#pkey-dialog").fadeOut("fast"),a("#svga-work-overlay").fadeOut("fast"),a(".post-button").prop("disabled",!1),C(a("#pkey-input")[0].value,e)}),a("#pkey-dialog-cancel").unbind(),a("#pkey-dialog-cancel").click(function(){a("#svga-work-overlay").fadeOut("fast"),a("#pkey-dialog").fadeOut("fast"),a(".post-button").prop("disabled",!1),u=!1}),c=function(){U="boys"===e?{backs:"#ecf0f1",humanbody:"#f0c7b1",clothes:"#386e77",hair:"#2a232b",ears:"#f0c7b1",faceshape:"#f0c7b1",chinshadow:"#f0c7b1",facehighlight:"#f0c7b1",eyebrows:"#2a232b",eyesback:"#000000",eyesfront:"#000000",eyesiris:"#4e60a3",glasses:"#26120B",mustache:"#2a232b",beard:"#2a232b",mouth:"#da7c87"}:{backs:"#ecf0f1",humanbody:"#F3D4CF",clothes:"#09aac5",hair:"#2a232b",ears:"#F3D4CF",faceshape:"#F3D4CF",chinshadow:"#F3D4CF",facehighlight:"#F3D4CF",eyebrows:"#2a232b",eyesback:"#000000",eyesfront:"#000000",eyesiris:"#4e60a3",glasses:"#26120B",mouth:"#f771a9"},a("#svga-svgmain").empty(),t();for(var r in s)oa="backs"===r||"hair"===r?1:0,s.hasOwnProperty(r)&&(s[r].active_shape=oa,a("#svga-elements-"+r+"-"+oa).trigger("click"));a("#svga-colors-faceshape > div:nth-child(1)").trigger("click"),q=2,X=!1,b()};var ca=.009;w(0),a("#pkey-input").keyup(function(){a("#avatars").hide(),a("#balance").hide(),a("#balance-spinner").show()}),a("#pkey-input").keyup(_.debounce(function(){k(a("#pkey-input")[0].value)},200)),a("#svga-dialog-ok").click(function(){"reset"===E?(c(),a("#svga-work-overlay").fadeOut("fast"),a("#svga-dialog").fadeOut("fast")):"random"===E&&(m(),a("#svga-work-overlay").fadeOut("fast"),a("#svga-dialog").fadeOut("fast"))}),a("#svga-dialog-cancel").click(function(){a("#svga-work-overlay").fadeOut("fast"),a("#svga-dialog").fadeOut("fast")}),a(".svga-close").click(function(){a("#svga-loader").hide(),a("#svga-work-overlay").fadeOut("fast"),a("#svga-message").fadeOut("fast")}),a("#svga-shareavatar").unbind(),a("#svga-shareavatar").click(function(){u||(u=!0,window.web3?C(a("#pkey-input")[0].value,e):(a(".post-button").prop("disabled",!0),a("#svga-work-overlay").fadeIn("fast"),a("#pkey-dialog").fadeIn("fast")))}),a(".svga-col-left .sp-dd").remove(),a("#svga-blocks-face").trigger("click"),a("#svga-bodyzones-faceshape").trigger("click"),a("#svga-elements-faceshape-"+Y.faceshape).trigger("click").addClass("svga-active-element"),a("#svga-colors-faceshape > div:nth-child(1)").trigger("click"),a("#svga-loader").hide(),q=2,X=!1,n()}function n(){var e=a(".svga-col-left"),s=a(".svga-col-right");if(e.height("auto"),s.height("auto"),window.innerWidth>=481){var t=e.height(),r=s.height();t>=r?s.height(t):e.height(r)}}window.addEventListener("load",function(){"undefined"!=typeof web3&&(window.web3=new Web3(web3.currentProvider))});var c,l="/svgavatars/",d=.1,v=.06,h="dark",p={backs:"basic",faceshape:"shape",chinshadow:"",facehighlight:"",humanbody:"",clothes:"basic",hair:"on head",ears:"ears",eyebrows:"eyebrows",eyesback:"",eyesiris:"iris",eyesfront:"eye shape",mouth:"mouth",nose:"nose",glasses:"glasses",mustache:"mustache",beard:"beard"},u=!1,f={};SVG.extend(SVG.Element,{svgaUp:function(a,e){var a=a?a:3,e=e?e:b,s=this.data("leftright"),t=this.data("updown");return t>-(a*e)?(this.move(s,t-e),this.data("updown",t-e-1e-7),!0):!1},svgaDown:function(a,e){var a=a?a:3,e=e?e:b,s=this.data("leftright"),t=this.data("updown");return a*e>t?(this.move(s,t+e),this.data("updown",t+e+1e-7),!0):!1}});var b=(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,navigator.userAgent.match(/(Android)/g)?!0:!1,navigator.userAgent.match(/(Opera)/g)?!0:!1,-1!==navigator.platform.toLowerCase().indexOf("win")&&-1!==navigator.userAgent.toLowerCase().indexOf("touch")?!0:!1,1);switch(h){case"light":a("#svga-container").addClass("svga-light");break;case"dark":a("#svga-container").addClass("svga-dark");break;case"custom":a("#svga-container").addClass("svga-custom");break;default:a("#svga-container").addClass("svga-light")}a("#svga-start-boys").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40px" height="40px" viewBox="0 0 80 80"><path class="svga-icon-boy" d="M73.22,72.6c-1.05-6.99-8.49-9.28-14.35-10.97c-3.07-0.89-6.98-1.58-9.48-3.72C47.3,56.13,47.5,50.9,49,49.8c3.27-2.39,5.26-7.51,6.14-11.25c0.25-1.07-0.36-0.46,0.81-0.64c0.71-0.11,2.13-2.3,2.64-3.21c1.02-1.83,2.41-4.85,2.42-8.02c0.01-2.23-1.09-2.51-2.41-2.29c-0.43,0.07-0.93,0.21-0.93,0.21c1.42-1.84,1.71-8.22-0.67-13.4C53.56,3.71,44.38,2,40,2c-2.35,0-7.61,1.63-7.81,3.31c-3.37,0.19-7.7,2.55-9.2,5.89c-2.41,5.38-1.48,11.4-0.68,13.4c0,0-0.5-0.14-0.93-0.21c-1.32-0.21-2.42,0.07-2.41,2.29c0.01,3.16,1.41,6.19,2.43,8.02c0.51,0.91,1.93,3.1,2.64,3.21c1.17,0.18,0.56-0.42,0.81,0.64c0.89,3.74,3.09,9.03,6.14,11.25c1.69,2.04,1.7,6.33-0.39,8.11c-2.84,2.43-7.37,3.07-10.84,4.12c-5.86,1.77-13.29,4.9-13.27,12.25C6.51,76.73,7.7,78,10.13,78h59.74c2.43,0,3.68-1.27,3.63-3.72C73.5,74.28,73.4,73.81,73.22,72.6C72.63,68.73,73.4,73.81,73.22,72.6z"/></svg>'),a("#svga-start-girls").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40px" height="40px" viewBox="0 0 80 80"><path class="svga-icon-girl" d="M71,74.56c-0.08-5.44-4.21-7.67-8.81-9.63c-3.65-1.55-12.07-2.23-13.83-6.23c-0.83-1.89-0.22-3.15,0.11-5.85c6.95,0.23,17.72-5.29,19.02-10.4c0.65-2.55-2.79-4.44-4.22-6.01c-1.86-2.04-3.3-4.5-4.29-7.07c-2.17-5.61-0.2-11.18-2.14-16.7C54.18,5.14,46.53,2.01,40,2.01l0,0c0,0,0,0,0,0s0,0,0,0l0,0c-6.53,0-14.18,3.13-16.83,10.66c-1.94,5.51,0.03,11.09-2.14,16.7c-0.99,2.57-2.44,5.03-4.29,7.07c-1.43,1.58-4.87,3.46-4.22,6.01c1.3,5.1,12.07,10.62,19.02,10.4c0.34,2.7,0.94,3.95,0.11,5.85c-1.75,3.99-10.18,4.67-13.83,6.23c-4.6,1.96-8.74,4.2-8.81,9.63c-0.04,2.79-0.04,3.43,3.49,3.43H67.5C71.04,77.99,71.04,77.35,71,74.56z"/></svg>'),i(!0),s(),a("#svga-start-boys").click(function(){s()}),a("#svga-start-girls").click(function(){t()});var y;setInterval(i,1e4),a(window).resize(function(){n()}),a(".scrollbar").scrollbar({showArrows:!1,ignoreMobile:!1})});
